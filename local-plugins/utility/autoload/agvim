# vim: ft=zsh

CHOICE=$(ag --color $* | fzf -0 -1 --ansi)
if [ ! -z "$CHOICE" ]; then
	# Open vim at the selected file and line, but also run the Ag scan
	# the ! on Ag! stops Ag jumping to the first match, and the wincmd gives the editor window focus
	nvim $( echo "$CHOICE" | awk 'BEGIN { FS=":" } { printf "+%d %s\n", $2, $1 } ') +"LAg! $*" "+wincmd k"
fi
